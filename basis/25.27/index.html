<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>


<body>
    <div id="time">

    </div>
    <div id="time2">

    </div>
    <hr>
    <select id="year-select" onchange="xiugainian(this,'year')">
        <option value="2000">2000</option>
        <option value="2001">2001</option>
        <option value="2002">2002</option>
        <option value="2003">2003</option>
        <option value="2018">2018</option>
        <option value="2019">2019</option>
    </select>

    <select id="month-select" onchange="xiugainian(this,'mon')">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
    </select>

    <select id="day-select" onchange="xiugainian(this,'day')">
            <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option>
    </select>

    <select id="hour-select" onchange="xiugainian(this,'h')">
        <option value="0">00</option>
        <option value="1">01</option>
        <option value="2">02</option>
        <option value="3">03</option>
        <option value="4">04</option>
        <option value="5">05</option>
        <option value="6">06</option>
        <option value="7">07</option>
        <option value="8">08</option>
        <option value="9">09</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="24">24</option>
    </select>

    <select id="minite-select" onchange="xiugainian(this,'m')">
        <option value="0">0</option>
        <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option><option value="32">32</option><option value="33">33</option><option value="34">34</option><option value="35">35</option><option value="36">36</option><option value="37">37</option><option value="38">38</option><option value="39">39</option><option value="40">40</option><option value="41">41</option><option value="42">42</option><option value="43">43</option><option value="44">44</option><option value="45">45</option><option value="46">46</option><option value="47">47</option><option value="48">48</option><option value="49">49</option><option value="50">50</option><option value="51">51</option><option value="52">52</option><option value="53">53</option><option value="54">54</option><option value="55">55</option><option value="56">56</option><option value="57">57</option><option value="58">58</option><option value="59">59</option>
    </select>

    <select id="second-select" onchange="xiugainian(this,'s')">
        <option value="0">0</option>
        <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option><option value="32">32</option><option value="33">33</option><option value="34">34</option><option value="35">35</option><option value="36">36</option><option value="37">37</option><option value="38">38</option><option value="39">39</option><option value="40">40</option><option value="41">41</option><option value="42">42</option><option value="43">43</option><option value="44">44</option><option value="45">45</option><option value="46">46</option><option value="47">47</option><option value="48">48</option><option value="49">49</option><option value="50">50</option><option value="51">51</option><option value="52">52</option><option value="53">53</option><option value="54">54</option><option value="55">55</option><option value="56">56</option><option value="57">57</option><option value="58">58</option><option value="59">59</option>
    </select>

    <p id="result-wrapper">现在距离
        <span id="year">2000</span> 年
        <span id="mon">01</span> 月
        <span id="day">01</span> 日
        <span id="week">日</span>
        <span id='h'>00</span>:
        <span id='m'>00</span>:
        <span id='s'>00</span> </p>
    <p id="hy">还有 0 天 0 小时 0 分 0 秒</p>
    <script>
        // ------------------------------------------------------------------------------------
        var time = {
            year: 2000,
            mon: 01,
            day: 01,
            week: '',
            h: 00,
            m: 00,
            s: 00
        }
        var hy = {
            d: 00,
            h: 00,
            m: 00,
            s: 00
        }

        function xiugainian(e, key) {
            var index = e.selectedIndex
            var val = e.options[index].value
            var text = e.options[index].text
            time[key] = val
            document.getElementById(key).innerText = val

            // 选择月份后生产天数
            if (key == 'mon') {
                document.getElementById('day-select').innerHTML = createE(getTs(val))
            }
            jishuan()
        }
        // 每月天数
        function getTs(mon) {
            mon = Number(mon)
            var no1 = [1, 3, 5, 7, 8, 10, 12]
            var no2 = [4, 6, 9, 11]
            var s = 0
            if (no1.indexOf(mon) != -1) {
                s = 31
            } else if (no2.indexOf(mon) != -1) {
                s = 30
            } else {
                // 二月
                if (time.year) {
                    if (time.year % 4 == 0 || time.year % 400 == 0 || time.year % 100 == 0) {
                        s = 29
                    }
                } else {
                    s = 28
                }

            }
            return s
        }
        // 生产html
        function createE(num) {
            var str = ''
            for (let i = 0; i < num; i++) {
                str += '<option value="' + (i + 1) + '">' + (i + 1) + '</option>'
            }
            return str
        }
        jishuan()
            // 计算差值
        function jishuan() {
            console.log(time.year + '-' + time.mon + "-" + time.day + ' ' + time.h + ':' + time.m + ':' + time.s);
            var t1 = new Date(time.year + '-' + time.mon + "-" + time.day + ' ' + time.h + ':' + time.m + ':' + time.s)
            var t2 = new Date().getTime();
            console.log(t1.getTime());
            console.log(t2);

            time.week = week(t1.getDay())
            document.getElementById('week').innerText = time.week
            formatS(t1.getTime() - t2)
        }
        // 格式化时间错
        function formatS(s) {
            var d = 1000 * 60 * 60 * 24
            var r = '还有'
            if (s < 0) {
                r = '已经过去'
            }
            s = Math.abs(s)
            hy.d = Math.floor(s / d) // 天数, 向下取整
            hy.h = Math.floor((s % d) / (1000 * 60 * 60));
            hy.m = Math.floor((s % (1000 * 60 * 60)) / (1000 * 60))
            hy.s = Math.floor((s % (1000 * 60)) / 1000)
            var str = ''
            if (s < 0) {
                str = r + hy.d + '天' + hy.h + '小时' + hy.m + '分钟' + hy.s + '秒';
            } else {

                str = r + hy.d + '天' + hy.h + '小时' + hy.m + '分钟' + hy.s + '秒';
            }
            document.getElementById('hy').innerHTML = str

        }


        // ------------------------------------------------------------------------------------
        function getT() {
            var t = new Date();
            var a = t.getFullYear() + '年' + num(t.getMonth() + 1) +
                '月' + num(t.getDate()) + '日 ' + week(t.getDay()) + ' ' + num(t.getHours()) + ':' + num(t.getMinutes()) + ':' + num(t.getSeconds())
            document.getElementById("time").innerText = a;
        }
        // 返回星期几
        function week(params) {
            var weeks = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六']
            return weeks[params]
        }
        // <10 加0
        function num(num) {
            if (num < 10) {
                num = '0' + num
            }
            return num
        }

        function getT2() {
            var t = new Date();
            var a = t.getFullYear() + '-' + num(t.getMonth() + 1) +
                '-' + num(t.getDate()) + ' ' + week(t.getDay()) + ' ' + to12(num(t.getHours())) + ':' + num(t.getMinutes()) + ':' + num(t.getSeconds())
            document.getElementById("time2").innerText = a;
        }
        // 24小时转12小时制
        function to12(h) {
            if (h > 12) {
                h = 'PM ' + (h - 12)
            } else {
                h = 'AM ' + h
            }
            return h
        }
        getT();
        getT2();
        setInterval(() => {
                getT();
                getT2();
            }, 1000)
            // ------------------------------------------------------------------------------------
        function Go() {
            console.log("Go");
        }

        function GoSteps(n) {
            if (typeof n == 'number') {
                n = Math.floor(n)
                if (n > 0) {
                    while (n--) {
                        Go()
                    }
                }
            } else if (typeof n == 'string') {

            } else if (typeof n == 'undefined') {
                Go()
            } else if (typeof n == 'boolean') {
                if (n) {
                    Go()
                }
            } else {

            }
        }

        GoSteps(10); // Go 10次
        GoSteps(1); // Go 1次
        GoSteps(); // Go 1次，认为缺少参数时，默认参数为1
        GoSteps(0); // 0次
        GoSteps(-1); // 0次
        GoSteps(1.4); // Go 1次
        GoSteps(1.6); // Go 1次
        GoSteps(-1); // 0次
        GoSteps(true); // Go 1次
        GoSteps(false); // 0次
        GoSteps("Test"); // 0次
        GoSteps(NaN); // 0次
        GoSteps(null); // 0次
    </script>
</body>

</html>